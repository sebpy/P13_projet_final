var rig_card="",uptime_rig="En ligne",show_nbgpu="show_block",show_uptime="show_block",show_minetime="show_block",show_hash="show_block",show_pw="show_block";
$(document).ready(function(){$.ajax({type:"GET",url:$SCRIPT_ROOT+"/_answer"}).done(function(b){$("#row").empty();var e=b.stats,c=b.cfg;b=b.availability;var h=Object.keys(e).length,f=0,g=0,d=0;0==c[0].cfg_nb_gpu&&(show_nbgpu="hidden_block");0==c[0].cfg_total_hash&&(show_hash="hidden_block");0==c[0].cfg_total_pw&&(show_pw="hidden_block");0==c[0].cfg_uptime&&(show_uptime="hidden_block");0==c[0].cfg_mineTime&&(show_minetime="hidden_block");$.each(e,function(b,a){"1"==a.online?(rig_card="rig_card_on",
uptime_rig="En ligne"):(rig_card="rig_card_off",d+=1,uptime_rig="Hors ligne");$("#row").append('<div class="col-sx-3 col-md-2"><div class="'+rig_card+' col-lg-12"><strong>'+a.nom_rig+'</strong><br><span class="'+show_nbgpu+'">GPUs: <strong>'+a.nb_gpu+" "+a.type_gpu+'</strong><br></span><span class="'+show_uptime+'">'+uptime_rig+": <strong>"+a.uptime.substring(0,10)+'</strong><br></span><span class="'+show_minetime+'">Miner up: <strong>'+a.mine_time+'</strong><br></span><span class="'+show_hash+'">Hashrate: <strong>'+
a.total_hash+" "+a.hash_unit+'</strong></span><br><span class="'+show_pw+'">Consommation: <strong>'+a.total_pw+"W</strong><br></span></div></div>");f+=parseFloat(a.total_pw);g+=parseInt(a.nb_gpu)});$("#tt_rig").text(h);$("#tt_pw").text(f.toFixed(2)+"W");$("#tt_gpu").text(g);$("#hl_rig").text(d);$("#availability").text(b+"%");0<d?$("#hl_rig").removeClass("badge-success").addClass("badge-danger"):$("#hl_rig").removeClass("badge-danger").addClass("badge-success");70>b.toFixed(2)?$(".average").removeClass("badge-success").addClass("badge-danger"):
70<=b.toFixed(2)&&90>b.toFixed(2)?$(".average").removeClass("badge-danger").addClass("badge-warning"):$(".average").removeClass("badge-warning").addClass("badge-success")})});
setInterval(function(){$.ajax({type:"GET",url:$SCRIPT_ROOT+"/_answer"}).done(function(b){$("#row").empty();var e=b.stats,c=b.cfg;b=b.availability;var h=Object.keys(e).length,f=0,g=0,d=0;0==c[0].cfg_nb_gpu&&(show_nbgpu="hidden_block");0==c[0].cfg_total_hash&&(show_hash="hidden_block");0==c[0].cfg_total_pw&&(show_pw="hidden_block");0==c[0].cfg_uptime&&(show_uptime="hidden_block");0==c[0].cfg_mineTime&&(show_minetime="hidden_block");$.each(e,function(b,a){"1"==a.online?(rig_card="rig_card_on",uptime_rig=
"En ligne"):(rig_card="rig_card_off",d+=1,uptime_rig="Hors ligne");$("#row").append('<div class="col-sx-3 col-md-2"><div class="'+rig_card+' col-lg-12"><strong>'+a.nom_rig+'</strong><br><span class="'+show_nbgpu+'">GPUs: <strong>'+a.nb_gpu+" "+a.type_gpu+'</strong><br></span><span class="'+show_uptime+'">'+uptime_rig+": <strong>"+a.uptime.substring(0,10)+'</strong><br></span><span class="'+show_minetime+'">Miner up: <strong>'+a.mine_time+'</strong><br></span><span class="'+show_hash+'">Hashrate: <strong>'+
a.total_hash+" "+a.hash_unit+'</strong></span><br><span class="'+show_pw+'">Consommation: <strong>'+a.total_pw+"W</strong><br></span></div></div>");f+=parseFloat(a.total_pw);g+=parseInt(a.nb_gpu)});$("#tt_rig").text(h);$("#tt_pw").text(f.toFixed(2)+"W");$("#tt_gpu").text(g);$("#hl_rig").text(d);$("#availability").text(b+"%");0<d?$("#hl_rig").removeClass("badge-success").addClass("badge-danger"):$("#hl_rig").removeClass("badge-danger").addClass("badge-success");70>b.toFixed(2)?$(".average").removeClass("badge-success").addClass("badge-danger"):
70<=b.toFixed(2)&&90>b.toFixed(2)?$(".average").removeClass("badge-danger").addClass("badge-warning"):$(".average").removeClass("badge-warning").addClass("badge-success")})},3E4);window.setTimeout(function(){$(".alert").fadeTo(500,0).slideUp(500,function(){$(this).remove()})},4E3);